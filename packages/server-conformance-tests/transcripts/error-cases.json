{
  "meta": {
    "name": "Error Cases",
    "description": "Golden transcripts for error responses and edge cases",
    "protocolVersion": "1.0"
  },
  "transcripts": [
    {
      "id": "error-404-stream-not-found",
      "description": "GET on non-existent stream returns 404",
      "category": "error",
      "tags": ["error", "404", "read"],
      "request": {
        "method": "GET",
        "path": "/v1/streams/does-not-exist?offset=-1",
        "headers": [],
        "body": "",
        "bodyEncoding": "utf8"
      },
      "response": {
        "status": 404,
        "headers": [],
        "body": "",
        "bodyEncoding": "utf8"
      },
      "ignoreHeaders": ["date", "server", "content-type", "content-length"],
      "presenceOnlyHeaders": [],
      "version": 1,
      "capturedAt": "2025-01-01T00:00:00.000Z"
    },
    {
      "id": "error-404-head-not-found",
      "description": "HEAD on non-existent stream returns 404",
      "category": "error",
      "tags": ["error", "404", "head"],
      "request": {
        "method": "HEAD",
        "path": "/v1/streams/does-not-exist",
        "headers": [],
        "body": "",
        "bodyEncoding": "utf8"
      },
      "response": {
        "status": 404,
        "headers": [],
        "body": "",
        "bodyEncoding": "utf8"
      },
      "ignoreHeaders": ["date", "server", "content-type", "content-length"],
      "presenceOnlyHeaders": [],
      "version": 1,
      "capturedAt": "2025-01-01T00:00:00.000Z"
    },
    {
      "id": "error-409-config-mismatch",
      "description": "PUT with different content-type returns 409 Conflict",
      "category": "error",
      "tags": ["error", "409", "create", "conflict"],
      "request": {
        "method": "PUT",
        "path": "/v1/streams/existing-text-stream",
        "headers": [["content-type", "application/json"]],
        "body": "",
        "bodyEncoding": "utf8"
      },
      "response": {
        "status": 409,
        "headers": [],
        "body": "",
        "bodyEncoding": "utf8"
      },
      "ignoreHeaders": ["date", "server", "content-type", "content-length"],
      "presenceOnlyHeaders": [],
      "version": 1,
      "capturedAt": "2025-01-01T00:00:00.000Z"
    },
    {
      "id": "error-409-sequence-conflict",
      "description": "POST with duplicate Stream-Seq returns 409",
      "category": "error",
      "tags": ["error", "409", "append", "sequence"],
      "request": {
        "method": "POST",
        "path": "/v1/streams/seq-stream",
        "headers": [
          ["content-type", "text/plain"],
          ["stream-seq", "1"]
        ],
        "body": "duplicate seq",
        "bodyEncoding": "utf8"
      },
      "response": {
        "status": 409,
        "headers": [],
        "body": "",
        "bodyEncoding": "utf8"
      },
      "ignoreHeaders": ["date", "server", "content-type", "content-length"],
      "presenceOnlyHeaders": [],
      "version": 1,
      "capturedAt": "2025-01-01T00:00:00.000Z"
    },
    {
      "id": "error-400-empty-json-array",
      "description": "POST with empty JSON array returns 400",
      "category": "error",
      "tags": ["error", "400", "append", "json"],
      "request": {
        "method": "POST",
        "path": "/v1/streams/json-stream",
        "headers": [["content-type", "application/json"]],
        "body": "[]",
        "bodyEncoding": "utf8"
      },
      "response": {
        "status": 400,
        "headers": [],
        "body": "",
        "bodyEncoding": "utf8"
      },
      "ignoreHeaders": ["date", "server", "content-type", "content-length"],
      "presenceOnlyHeaders": [],
      "version": 1,
      "capturedAt": "2025-01-01T00:00:00.000Z"
    },
    {
      "id": "error-404-append-not-found",
      "description": "POST to non-existent stream returns 404",
      "category": "error",
      "tags": ["error", "404", "append"],
      "request": {
        "method": "POST",
        "path": "/v1/streams/does-not-exist",
        "headers": [["content-type", "text/plain"]],
        "body": "data",
        "bodyEncoding": "utf8"
      },
      "response": {
        "status": 404,
        "headers": [],
        "body": "",
        "bodyEncoding": "utf8"
      },
      "ignoreHeaders": ["date", "server", "content-type", "content-length"],
      "presenceOnlyHeaders": [],
      "version": 1,
      "capturedAt": "2025-01-01T00:00:00.000Z"
    },
    {
      "id": "error-404-delete-not-found",
      "description": "DELETE on non-existent stream returns 404",
      "category": "error",
      "tags": ["error", "404", "delete"],
      "request": {
        "method": "DELETE",
        "path": "/v1/streams/does-not-exist",
        "headers": [],
        "body": "",
        "bodyEncoding": "utf8"
      },
      "response": {
        "status": 404,
        "headers": [],
        "body": "",
        "bodyEncoding": "utf8"
      },
      "ignoreHeaders": ["date", "server", "content-type", "content-length"],
      "presenceOnlyHeaders": [],
      "version": 1,
      "capturedAt": "2025-01-01T00:00:00.000Z"
    }
  ]
}
